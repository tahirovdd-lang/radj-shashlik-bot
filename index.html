<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Radj Shashlik</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org"></script>
    <style>
        body{font-family:Arial,sans-serif;background:#f5f5f5;padding:10px;margin:0;color:#333}
        h2,h3{text-align:center;margin-bottom:10px}
        .lang-box{text-align:right;margin-bottom:15px}
        .lang-btn{padding:6px 12px;border:1px solid #0088cc;background:#fff;cursor:pointer;border-radius:6px;font-weight:bold;color:#0088cc}
        .lang-btn.active{background:#0088cc;color:#fff}
        .categories{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-bottom:15px}
        .category-btn{padding:10px 15px;border:none;border-radius:8px;background:#e0e0e0;cursor:pointer;font-size:14px}
        .category-btn.active{background:#0088cc;color:#fff}
        .card{background:#fff;border-radius:12px;padding:15px;margin-bottom:10px;box-shadow:0 2px 5px rgba(0,0,0,0.05);display:flex;justify-content:space-between;align-items:center}
        .title{font-weight:bold;font-size:16px}
        .price{color:#2ecc71;font-weight:bold;margin-top:4px}
        .controls{display:flex;gap:12px;align-items:center}
        button.qty-btn{width:35px;height:35px;border:none;border-radius:8px;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center}
        .plus{background:#4CAF50;color:white}
        .minus{background:#ddd;color:#333}
        .cart{background:#fff;border-radius:12px;padding:15px;margin-top:20px;border:1px solid #ddd}
        .cart-item{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid #eee}
        .total{text-align:center;font-size:18px;font-weight:bold;margin-top:15px}
        input,select{width:100%;padding:12px;margin-top:10px;border-radius:8px;border:1px solid #ccc;box-sizing:border-box}
        .order-btn{width:100%;background:#0088cc;color:white;font-size:18px;padding:15px;margin-top:15px;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
    </style>
</head>
<body>

<div class="lang-box">
    <button class="lang-btn" id="btn-ru" onclick="setLanguage('ru')">RU</button>
    <button class="lang-btn" id="btn-uz" onclick="setLanguage('uz')">UZ</button>
    <button class="lang-btn" id="btn-en" onclick="setLanguage('en')">EN</button>
</div>

<h2 id="main-title">üçΩ Radj Shashlik</h2>

<div id="categories" class="categories"></div>
<div id="menu"></div>

<div class="cart">
    <h3 id="cart-title">üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-items">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
    <div class="total"><span id="total-label">–ò—Ç–æ–≥–æ</span>: <span id="total">0</span> <span class="curr">—Å—É–º</span></div>
</div>

<select id="delivery" onchange="toggleAddress()">
    <option value="delivery" id="opt-del">üöö –î–æ—Å—Ç–∞–≤–∫–∞</option>
    <option value="pickup" id="opt-pick">üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑</option>
</select>
<input type="text" id="address" placeholder="üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
<input type="tel" id="phone" placeholder="üì± –¢–µ–ª–µ—Ñ–æ–Ω">

<button class="order-btn" id="order-btn" onclick="sendOrder()">‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    let currentLang = 'ru';
    let currentCategory = 'shashlik';
    const cart = {};

    const translations = {
        ru: {
            cart: "üõí –ö–æ—Ä–∑–∏–Ω–∞", empty: "–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞", total: "–ò—Ç–æ–≥–æ", curr: "—Å—É–º",
            del: "üöö –î–æ—Å—Ç–∞–≤–∫–∞", pick: "üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑", addr: "üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏", phone: "üì± –¢–µ–ª–µ—Ñ–æ–Ω",
            order: "‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑", alert_p: "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞", alert_e: "–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞",
            cats: { shashlik: "–®–∞—à–ª—ã–∫", soup: "–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞", national: "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ", salad: "–°–∞–ª–∞—Ç—ã", drink: "–ù–∞–ø–∏—Ç–∫–∏", bread: "–•–ª–µ–±" },
            items: { chicken: "–®–∞—à–ª—ã–∫ –∫—É—Ä–∏–Ω—ã–π", beef: "–®–∞—à–ª—ã–∫ –≥–æ–≤—è–∂–∏–π", shurpa: "–®—É—Ä–ø–∞", plov: "–ü–ª–æ–≤", olivie: "–û–ª–∏–≤—å–µ", cola: "–ö–æ–ª–∞ 1–ª", bread_i: "–õ–µ–ø—ë—à–∫–∞" }
        },
        uz: {
            cart: "üõí Savat", empty: "Savat bo'sh", total: "Jami", curr: "so'm",
            del: "üöö Yetkazib berish", pick: "üèÉ Olib ketish", addr: "üìç Manzil", phone: "üì± Telefon",
            order: "‚úÖ Buyurtma berish", alert_p: "Telefon raqamingizni kiriting", alert_e: "Savat bo'sh",
            cats: { shashlik: "Kabob", soup: "Sho'rvalar", national: "Milliy taomlar", salad: "Salatlar", drink: "Ichimliklar", bread: "Non" },
            items: { chicken: "Tovuq kabob", beef: "Mol go'shti kabobi", shurpa: "Sho'rva", plov: "Palov", olivie: "Olyvye", cola: "Kola 1l", bread_i: "Yopgan non" }
        },
        en: {
            cart: "üõí Cart", empty: "Cart is empty", total: "Total", curr: "sum",
            del: "üöö Delivery", pick: "üèÉ Pickup", addr: "üìç Delivery address", phone: "üì± Phone",
            order: "‚úÖ Place Order", alert_p: "Enter phone number", alert_e: "Cart is empty",
            cats: { shashlik: "Shashlik", soup: "Soups", national: "National", salad: "Salads", drink: "Drinks", bread: "Bread" },
            items: { chicken: "Chicken Kebab", beef: "Beef Kebab", shurpa: "Shurpa", plov: "Plov", olivie: "Olivier", cola: "Cola 1l", bread_i: "Flatbread" }
        }
    };

    const menuData = {
        shashlik: [{id:"chicken", p:45000}, {id:"beef", p:60000}],
        soup: [{id:"shurpa", p:35000}],
        national: [{id:"plov", p:50000}],
        salad: [{id:"olivie", p:30000}],
        drink: [{id:"cola", p:15000}],
        bread: [{id:"bread_i", p:5000}]
    };

    function setLanguage(lang) {
        currentLang = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + lang).classList.add('active');

        const t = translations[lang];
        document.getElementById('cart-title').innerText = t.cart;
        document.getElementById('total-label').innerText = t.total;
        document.querySelectorAll('.curr').forEach(e => e.innerText = t.curr);
        document.getElementById('opt-del').innerText = t.del;
        document.getElementById('opt-pick').innerText = t.pick;
        document.getElementById('address').placeholder = t.addr;
        document.getElementById('phone').placeholder = t.phone;
        document.getElementById('order-btn').innerText = t.order;

        renderCategories();
        renderMenu();
        renderCart();
    }

    function renderCategories() {
        const container = document.getElementById("categories");
        container.innerHTML = "";
        Object.keys(menuData).forEach(catKey => {
            const btn = document.createElement("button");
            btn.className = `category-btn ${currentCategory === catKey ? 'active' : ''}`;
            btn.innerText = translations[currentLang].cats[catKey];
            btn.onclick = () => { currentCategory = catKey; renderCategories(); renderMenu(); };
            container.appendChild(btn);
        });
    }

    function renderMenu() {
        const menuDiv = document.getElementById("menu");
        menuDiv.innerHTML = "";
        const t = translations[currentLang];

        menuData[currentCategory].forEach(item => {
            if (!cart[item.id]) cart[item.id] = { qty: 0, p: item.p };
            
            menuDiv.innerHTML += `
                <div class="card">
                    <div>
                        <div class="title">${t.items[item.id]}</div>
                        <div class="price">${item.p} ${t.curr}</div>
                    </div>
                    <div class="controls">
                        <button class="qty-btn minus" onclick="changeQty('${item.id}', -1)">‚àí</button>
                        <span id="q-${item.id}" style="font-weight:bold;min-width:20px;text-align:center">${cart[item.id].qty}</span>
                        <button class="qty-btn plus" onclick="changeQty('${item.id}', 1)">+</button>
                    </div>
                </div>`;
        });
    }

    function changeQty(id, delta) {
        cart[id].qty = Math.max(0, cart[id].qty + delta);
        const el = document.getElementById("q-" + id);
        if (el) el.innerText = cart[id].qty;
        renderCart();
    }

    function renderCart() {
        const itemsDiv = document.getElementById("cart-items");
        const t = translations[currentLang];
        itemsDiv.innerHTML = "";
        let total = 0;
        let hasItems = false;

        for (let id in cart) {
            if (cart[id].qty > 0) {
                hasItems = true;
                const cost = cart[id].qty * cart[id].p;
                total += cost;
                itemsDiv.innerHTML += `
                    <div class="cart-item">
                        <span>${t.items[id]} x ${cart[id].qty}</span>
                        <span>${cost} ${t.curr}</span>
                    </div>`;
            }
        }
        if (!hasItems) itemsDiv.innerText = t.empty;
        document.getElementById("total").innerText = total;
    }

    function toggleAddress() {
        const isDelivery = document.getElementById("delivery").value === "delivery";
        document.getElementById("address").style.display = isDelivery ? "block" : "none";
    }

    function sendOrder() {
        const t = translations[currentLang];
        const total = document.getElementById("total").innerText;
        const phone = document.getElementById("phone").value.trim();
        
        if (total == "0") return alert(t.alert_e);
        if (!phone) return alert(t.alert_p);

        const orderDetails = [];
        for (let id in cart) {
            if (cart[id].qty > 0) {
                orderDetails.push(`${translations[currentLang].items[id]} (${cart[id].qty})`);
            }
        }

        const data = {
            items: orderDetails,
            total: total,
            phone: phone,
            type: document.getElementById("delivery").value,
            address: document.getElementById("address").value
        };

        tg.sendData(JSON.stringify(data));
        tg.close();
    }

    setLanguage('ru');
    toggleAddress();
</script>

</body>
</html>



