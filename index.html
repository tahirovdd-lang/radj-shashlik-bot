<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Radj Shashlik</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f5f5f5;
  padding:10px;
  margin:0
}
h2,h3{text-align:center}
.lang-btn,.category-btn{
  padding:8px 12px;
  margin:3px;
  border:none;
  border-radius:8px;
  background:#e0e0e0;
  cursor:pointer
}
.lang-btn.active,.category-btn.active{
  background:#0088cc;
  color:#fff
}
.card{
  background:#fff;
  border-radius:12px;
  padding:15px;
  margin-bottom:10px;
  display:flex;
  justify-content:space-between;
  align-items:center
}
.price{color:#2ecc71;font-weight:bold}
.controls{display:flex;gap:10px;align-items:center}
.plus{background:#4CAF50;color:white}
.minus{background:#ddd}
.cart{
  background:#fff;
  border-radius:12px;
  padding:15px;
  margin-top:15px
}
.cart-item{
  display:flex;
  justify-content:space-between;
  padding:5px 0
}
input,select{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid #ccc
}
</style>
</head>

<body>

<h2>ğŸ½ Radj Shashlik</h2>

<!-- Ğ¯Ğ—Ğ«Ğš -->
<div style="text-align:center">
  <button class="lang-btn active" onclick="setLang('ru',this)">ğŸ‡·ğŸ‡º RU</button>
  <button class="lang-btn" onclick="setLang('uz',this)">ğŸ‡ºğŸ‡¿ UZ</button>
  <button class="lang-btn" onclick="setLang('en',this)">ğŸ‡¬ğŸ‡§ EN</button>
</div>

<!-- ĞšĞĞ¢Ğ•Ğ“ĞĞ Ğ˜Ğ˜ -->
<div id="categories" style="text-align:center;margin-top:10px"></div>

<!-- ĞœĞ•ĞĞ® -->
<div id="menu"></div>

<!-- ĞšĞĞ Ğ—Ğ˜ĞĞ -->
<div class="cart">
  <h3 id="cart-title">ğŸ›’ ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°</h3>
  <div id="cart-items">ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ğ¿ÑƒÑÑ‚Ğ°</div>
  <div><b id="total-label">Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:</b> <span id="total">0</span> ÑÑƒĞ¼</div>
</div>

<select id="delivery">
  <option value="delivery">ğŸšš Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°</option>
  <option value="pickup">ğŸƒ Ğ¡Ğ°Ğ¼Ğ¾Ğ²Ñ‹Ğ²Ğ¾Ğ·</option>
</select>

<input id="address" placeholder="ğŸ“ ĞĞ´Ñ€ĞµÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸">
<input id="phone" placeholder="ğŸ“± Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½">

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

let lang = "ru";
let currentCategory = "Ğ¨Ğ°ÑˆĞ»Ñ‹Ğº";
const cart = {};

const texts = {
  ru:{cart:"ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°",empty:"ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ğ¿ÑƒÑÑ‚Ğ°",total:"Ğ˜Ñ‚Ğ¾Ğ³Ğ¾",btn:"ĞÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·"},
  uz:{cart:"Savat",empty:"Savat boâ€˜sh",total:"Jami",btn:"Buyurtma berish"},
  en:{cart:"Cart",empty:"Cart is empty",total:"Total",btn:"Place order"}
};

const menuData = {
  "Ğ¨Ğ°ÑˆĞ»Ñ‹Ğº":[["Ğ¨Ğ°ÑˆĞ»Ñ‹Ğº ĞºÑƒÑ€Ğ¸Ğ½Ñ‹Ğ¹",45000],["Ğ¨Ğ°ÑˆĞ»Ñ‹Ğº Ğ³Ğ¾Ğ²ÑĞ¶Ğ¸Ğ¹",60000]],
  "ĞŸĞµÑ€Ğ²Ñ‹Ğµ Ğ±Ğ»ÑĞ´Ğ°":[["Ğ¨ÑƒÑ€Ğ¿Ğ°",35000]],
  "ĞĞ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ»ÑĞ´Ğ°":[["ĞŸĞ»Ğ¾Ğ²",50000]],
  "Ğ¡Ğ°Ğ»Ğ°Ñ‚Ñ‹":[["ĞĞ»Ğ¸Ğ²ÑŒĞµ",30000]],
  "ĞĞ°Ğ¿Ğ¸Ñ‚ĞºĞ¸":[["ĞšĞ¾Ğ»Ğ° 1Ğ»",15000]],
  "Ğ¥Ğ»ĞµĞ±":[["Ğ›ĞµĞ¿Ñ‘ÑˆĞºĞ°",5000]]
};

function setLang(l,btn){
  lang=l;
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderAll();
}

function renderCategories(){
  const div=document.getElementById("categories");
  div.innerHTML="";
  for(let c in menuData){
    const b=document.createElement("button");
    b.className="category-btn"+(c===currentCategory?" active":"");
    b.innerText=c;
    b.onclick=()=>{currentCategory=c;renderCategories();renderMenu();};
    div.appendChild(b);
  }
}

function renderMenu(){
  const menu=document.getElementById("menu");
  menu.innerHTML="";
  menuData[currentCategory].forEach(([name,price])=>{
    if(!cart[name]) cart[name]=0;
    menu.innerHTML+=`
      <div class="card">
        <div>
          <div><b>${name}</b></div>
          <div class="price">${price} ÑÑƒĞ¼</div>
        </div>
        <div class="controls">
          <button class="minus" onclick="change('${name}',-1)">âˆ’</button>
          <span>${cart[name]}</span>
          <button class="plus" onclick="change('${name}',1)">+</button>
        </div>
      </div>`;
  });
}

function change(name,delta){
  cart[name]=Math.max(0,cart[name]+delta);
  renderMenu();
  renderCart();
}

function renderCart(){
  const div=document.getElementById("cart-items");
  div.innerHTML="";
  let total=0,has=false;
  for(let i in cart){
    if(cart[i]>0){
      has=true;
      const p=findPrice(i);
      total+=cart[i]*p;
      div.innerHTML+=`<div class="cart-item"><span>${i} Ã— ${cart[i]}</span><span>${cart[i]*p} ÑÑƒĞ¼</span></div>`;
    }
  }
  if(!has) div.innerText=texts[lang].empty;
  document.getElementById("total").innerText=total;

  // ğŸ”¥ MAIN BUTTON
  if(total>0){
    tg.MainButton.setText(texts[lang].btn + " â€¢ " + total + " ÑÑƒĞ¼");
    tg.MainButton.show();
  } else {
    tg.MainButton.hide();
  }
}

function findPrice(n){
  for(let c in menuData)
    for(let i of menuData[c])
      if(i[0]==n) return i[1];
  return 0;
}

tg.MainButton.onClick(()=>{
  const phone=document.getElementById("phone").value.trim();
  if(!phone) return alert("Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½");

  tg.sendData(JSON.stringify({
    order:cart,
    total:document.getElementById("total").innerText,
    phone:phone,
    lang:lang
  }));
  tg.close();
});

function renderAll(){
  document.getElementById("cart-title").innerText=texts[lang].cart;
  document.getElementById("total-label").innerText=texts[lang].total;
  renderCategories();
  renderMenu();
  renderCart();
}

renderAll();
</script>

</body>
</html>
