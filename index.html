<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Radj Shashlik</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box}
body{
  font-family:Arial,sans-serif;
  background:#f5f5f5;
  margin:0;
  padding:10px 10px 90px;
}
.logo-container{display:flex;justify-content:center;margin-top:5px}
.logo{width:90px;border-radius:14px}
h2,h3{text-align:center;margin:8px 0}

.lang-wrap{display:flex;justify-content:center;gap:8px;margin:10px 0}
.lang-btn{
  padding:8px 14px;border:none;border-radius:20px;
  background:#e0e0e0;font-weight:bold
}
.lang-btn.active{background:#0088cc;color:#fff}

#categories{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:10px}
.category-btn{
  padding:8px 14px;border:none;border-radius:20px;
  background:#eee;font-size:14px
}
.category-btn.active{background:#0088cc;color:#fff}

.card{
  background:#fff;border-radius:14px;padding:12px;margin-bottom:10px;
  display:flex;justify-content:space-between;align-items:center
}
.price{color:#2ecc71;font-weight:bold}

.controls{display:flex;align-items:center;gap:8px}
.controls button{
  width:36px;height:36px;border:none;border-radius:50%;
  font-size:20px
}
.plus{background:#4CAF50;color:#fff}
.minus{background:#ddd}

.cart{background:#fff;border-radius:14px;padding:14px;margin-top:10px}
.cart-item{display:flex;justify-content:space-between;margin:4px 0}

input,select{
  width:100%;padding:12px;margin-top:10px;
  border-radius:10px;border:1px solid #ccc;font-size:16px
}
</style>
</head>

<body>

<div class="logo-container">
  <img src="logo.png" class="logo">
</div>

<h2>üçΩ Radj Shashlik</h2>

<div class="lang-wrap">
  <button class="lang-btn active" onclick="setLang('ru',this)">üá∑üá∫ RU</button>
  <button class="lang-btn" onclick="setLang('uz',this)">üá∫üáø UZ</button>
  <button class="lang-btn" onclick="setLang('en',this)">üá¨üáß EN</button>
</div>

<div id="categories"></div>
<div id="menu"></div>

<div class="cart">
  <h3 id="cart-title">üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
  <div id="cart-items">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
  <div><b id="total-label">–ò—Ç–æ–≥–æ:</b> <span id="total">0</span> —Å—É–º</div>
</div>

<input id="phone" placeholder="üì± –¢–µ–ª–µ—Ñ–æ–Ω">

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

let lang="ru";
let currentCategory="–®–∞—à–ª—ã–∫";
const cart={};

const texts={
  ru:{cart:"–ö–æ—Ä–∑–∏–Ω–∞",empty:"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞",total:"–ò—Ç–æ–≥–æ",btn:"–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"},
  uz:{cart:"Savat",empty:"Savat bo‚Äòsh",total:"Jami",btn:"Buyurtma berish"},
  en:{cart:"Cart",empty:"Cart is empty",total:"Total",btn:"Place order"}
};

const menuData={
  "–®–∞—à–ª—ã–∫":[["–®–∞—à–ª—ã–∫ –∫—É—Ä–∏–Ω—ã–π",45000],["–®–∞—à–ª—ã–∫ –≥–æ–≤—è–∂–∏–π",60000]],
  "–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞":[["–®—É—Ä–ø–∞",35000]],
  "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª—é–¥–∞":[["–ü–ª–æ–≤",50000]],
  "–°–∞–ª–∞—Ç—ã":[["–û–ª–∏–≤—å–µ",30000]],
  "–ù–∞–ø–∏—Ç–∫–∏":[["–ö–æ–ª–∞ 1–ª",15000]],
  "–•–ª–µ–±":[["–õ–µ–ø—ë—à–∫–∞",5000]]
};

function setLang(l,btn){
  lang=l;
  document.querySelectorAll(".lang-btn").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderAll();
}

function renderCategories(){
  const div=document.getElementById("categories");
  div.innerHTML="";
  for(let c in menuData){
    const b=document.createElement("button");
    b.className="category-btn"+(c===currentCategory?" active":"");
    b.innerText=c;
    b.onclick=()=>{currentCategory=c;renderCategories();renderMenu();};
    div.appendChild(b);
  }
}

function renderMenu(){
  const menu=document.getElementById("menu");
  menu.innerHTML="";
  menuData[currentCategory].forEach(([n,p])=>{
    if(!cart[n]) cart[n]=0;
    menu.innerHTML+=`
      <div class="card">
        <div><b>${n}</b><div class="price">${p} —Å—É–º</div></div>
        <div class="controls">
          <button class="minus" onclick="change('${n}',-1)">‚àí</button>
          <span>${cart[n]}</span>
          <button class="plus" onclick="change('${n}',1)">+</button>
        </div>
      </div>`;
  });
}

function change(n,d){
  cart[n]=Math.max(0,cart[n]+d);
  renderMenu();
  renderCart();
}

function renderCart(){
  const div=document.getElementById("cart-items");
  div.innerHTML="";
  let total=0,has=false;

  for(let i in cart){
    if(cart[i]>0){
      has=true;
      const p=findPrice(i);
      total+=cart[i]*p;
      div.innerHTML+=`<div class="cart-item"><span>${i} √ó ${cart[i]}</span><span>${cart[i]*p} —Å—É–º</span></div>`;
    }
  }
  if(!has) div.innerText=texts[lang].empty;
  document.getElementById("total").innerText=total;

  if(total>0){
    tg.MainButton.setText(texts[lang].btn+" ‚Ä¢ "+total+" —Å—É–º");
    tg.MainButton.show();
  }else{
    tg.MainButton.hide();
  }
}

function findPrice(n){
  for(let c in menuData)
    for(let i of menuData[c])
      if(i[0]==n) return i[1];
  return 0;
}

tg.MainButton.onClick(()=>{
  const phone=document.getElementById("phone").value.trim();
  if(!phone){
    tg.showAlert("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω");
    return;
  }

  tg.sendData(JSON.stringify({
    order:cart,
    total:document.getElementById("total").innerText,
    phone:phone,
    lang:lang
  }));

  tg.showPopup({
    title:"–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç",
    message:"–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ üëç",
    buttons:[{type:"ok"}]
  });
});

function renderAll(){
  document.getElementById("cart-title").innerText=texts[lang].cart;
  document.getElementById("total-label").innerText=texts[lang].total;
  renderCategories();
  renderMenu();
  renderCart();
}

renderAll();
</script>
</body>
</html>



