<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Radj Shashlik</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  padding:10px 10px 110px;
  font-family:Arial,sans-serif;
  background:#f4f4f4;
}
.logo{display:block;margin:5px auto;width:90px;border-radius:14px}
h2{text-align:center;margin:8px 0}

.langs, .types, .categories{
  display:flex;gap:6px;justify-content:center;flex-wrap:wrap;margin-bottom:10px
}
button{
  border:none;padding:8px 14px;border-radius:20px;font-weight:bold
}
.active{background:#0088cc;color:#fff}
.gray{background:#e0e0e0}

.card{
  background:#fff;border-radius:14px;padding:12px;margin-bottom:10px;
  display:flex;justify-content:space-between;align-items:center
}
.price{color:#27ae60;font-weight:bold}
.ctrl{display:flex;gap:8px;align-items:center}
.ctrl button{width:34px;height:34px;border-radius:50%;font-size:18px}

.cart{
  background:#fff;border-radius:14px;padding:12px;margin-top:10px
}
.cart-item{display:flex;justify-content:space-between;margin:4px 0}

input,textarea{
  width:100%;padding:10px;margin-top:8px;
  border-radius:10px;border:1px solid #ccc;font-size:16px
}
</style>
</head>

<body>

<img src="logo.png" class="logo">
<h2>üçΩ Radj Shashlik</h2>

<div class="langs">
  <button class="active" onclick="setLang('ru',this)">RU</button>
  <button class="gray" onclick="setLang('uz',this)">UZ</button>
  <button class="gray" onclick="setLang('en',this)">EN</button>
</div>

<div class="types">
  <button class="active" onclick="setType('delivery',this)">üöö –î–æ—Å—Ç–∞–≤–∫–∞</button>
  <button class="gray" onclick="setType('pickup',this)">üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑</button>
</div>

<input id="address" placeholder="üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">

<div class="categories" id="categories"></div>
<div id="menu"></div>

<div class="cart">
  <b id="cartTitle">–ö–æ—Ä–∑–∏–Ω–∞</b>
  <div id="cartItems">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
  <div><b>–ò—Ç–æ–≥–æ:</b> <span id="total">0</span> —Å—É–º</div>
</div>

<input id="phone" placeholder="üì± –¢–µ–ª–µ—Ñ–æ–Ω">

<script>
const tg = Telegram.WebApp;
tg.ready(); tg.expand();

let lang='ru', type='delivery', category='';
const cart={};

const catNames={
  salads:{ru:'–°–∞–ª–∞—Ç—ã',uz:'Salatlar',en:'Salads'},
  grill:{ru:'–®–∞—à–ª—ã–∫',uz:'Shashlik',en:'Grill'},
  national:{ru:'–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª—é–¥–∞',uz:'Milliy taomlar',en:'National'},
  mangal:{ru:'–ë–ª—é–¥–∞ –Ω–∞ –º–∞–Ω–≥–∞–ª–µ',uz:'Mangal taomlari',en:'Grill plates'},
  soups:{ru:'–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞',uz:'Sho‚Äòrvalar',en:'Soups'},
  drinks:{ru:'–ù–∞–ø–∏—Ç–∫–∏',uz:'Ichimliklar',en:'Drinks'},
  bread:{ru:'–•–ª–µ–±',uz:'Non',en:'Bread'}
};

const menu={
  salads:[
    ['–°–≤–µ–∂–∏–π',30000],['–ê—á–∏—á—É–∫',30000],['–®–∞–∫–∞—Ä–æ–ø',30000],['–¶–µ–∑–∞—Ä—å',35000]
  ],
  grill:[
    ['–ú–æ–ª–æ—Ç—ã–π',28000],['–ö–æ—Ä–µ–π–∫–∞',40000],['–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ',22000]
  ],
  national:[
    ['–ñ–∏–∑ –ë–∏–∑ 1–∫–≥',260000],['–ñ–∏–∑ –ë–∏–∑ 0.5–∫–≥',130000]
  ],
  mangal:[
    ['–°—Ç–µ–π–∫ –ö—É—Ä–∏–Ω–Ω—ã–π',100000],['–°—Ç–µ–π–∫ –¢–∏–±–æ–Ω',20000]
  ],
  soups:[
    ['–®—É—Ä–ø–∞',35000],['–ë–æ—Ä—â',25000]
  ],
  drinks:[
    ['Coca Cola 1L',14000],['–ß–∞–π',5000]
  ],
  bread:[
    ['–õ–µ–ø–µ—à–∫–∞',10000]
  ]
};

function setLang(l,btn){
  lang=l;
  document.querySelectorAll('.langs button').forEach(b=>b.className='gray');
  btn.className='active';
  render();
}

function setType(t,btn){
  type=t;
  document.querySelectorAll('.types button').forEach(b=>b.className='gray');
  btn.className='active';
  document.getElementById('address').style.display =
    t==='delivery'?'block':'none';
}

function renderCats(){
  const c=document.getElementById('categories');
  c.innerHTML='';
  for(let k in catNames){
    const b=document.createElement('button');
    b.className=k===category?'active':'gray';
    b.innerText=catNames[k][lang];
    b.onclick=()=>{category=k;renderMenu();renderCats()};
    c.appendChild(b);
  }
}

function renderMenu(){
  const m=document.getElementById('menu');
  m.innerHTML='';
  if(!category) return;
  menu[category].forEach(([n,p])=>{
    cart[n]=cart[n]||0;
    m.innerHTML+=`
    <div class="card">
      <div><b>${n}</b><div class="price">${p} —Å—É–º</div></div>
      <div class="ctrl">
        <button onclick="chg('${n}',-1)">‚àí</button>
        <span>${cart[n]}</span>
        <button onclick="chg('${n}',1)">+</button>
      </div>
    </div>`;
  });
}

function chg(n,d){
  cart[n]=Math.max(0,cart[n]+d);
  renderMenu(); renderCart();
}

function renderCart(){
  let t=0,html='';
  for(let i in cart){
    if(cart[i]>0){
      t+=cart[i]*findPrice(i);
      html+=`<div class="cart-item"><span>${i}√ó${cart[i]}</span><span>${cart[i]*findPrice(i)}</span></div>`;
    }
  }
  document.getElementById('cartItems').innerHTML=html||'–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞';
  document.getElementById('total').innerText=t;

  if(t>0){
    tg.MainButton.setText('–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ‚Ä¢ '+t+' —Å—É–º');
    tg.MainButton.show();
  }else tg.MainButton.hide();
}

function findPrice(n){
  for(let k in menu)
    for(let i of menu[k])
      if(i[0]==n) return i[1];
  return 0;
}

tg.MainButton.onClick(()=>{
  tg.sendData(JSON.stringify({
    order:cart,
    phone:document.getElementById('phone').value,
    delivery:type,
    address:document.getElementById('address').value,
    lang:lang,
    total:document.getElementById('total').innerText
  }));
  tg.showPopup({title:'–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç',message:'–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ üëç',buttons:[{type:'ok'}]});
});

function render(){
  renderCats(); renderMenu(); renderCart();
}

render();
</script>
</body>
</html>





