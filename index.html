<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Radj Shashlik</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{font-family:Arial;background:#f5f5f5;padding:10px;margin:0}
h2,h3{text-align:center}
.lang-btn,.category-btn,button{
  padding:8px 12px;margin:3px;border:none;border-radius:6px;
  background:#ddd;cursor:pointer
}
.lang-btn.active,.category-btn.active{
  background:#0088cc;color:#fff
}
.card{background:#fff;border-radius:10px;padding:15px;margin-bottom:10px}
.controls{display:flex;gap:10px;align-items:center}
.plus{background:#4CAF50;color:white}
.cart{background:#fff;border-radius:10px;padding:15px;margin-top:10px}
.cart-item{display:flex;justify-content:space-between}
input,select{width:100%;padding:10px;margin-top:8px}
.order-btn{background:#0088cc;color:white;font-size:18px;width:100%}
</style>
</head>

<body>

<h2>üçΩ Radj Shashlik</h2>

<div id="lang"></div>
<div id="categories"></div>
<div id="menu"></div>

<div class="cart">
  <h3 id="cart-title">üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
  <div id="cart-items">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
  <div><b>–ò—Ç–æ–≥–æ:</b> <span id="total">0</span> —Å—É–º</div>
</div>

<select id="delivery">
  <option value="delivery">üöö –î–æ—Å—Ç–∞–≤–∫–∞</option>
  <option value="pickup">üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑</option>
</select>

<input id="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
<input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">

<button id="order" type="button" class="order-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const tg = Telegram.WebApp;
  tg.ready();
  tg.expand();

  let lang = "ru";
  let currentCategory = "–®–∞—à–ª—ã–∫";
  const cart = {};

  const texts = {
    ru:{cart:"–ö–æ—Ä–∑–∏–Ω–∞",empty:"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞",order:"–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"},
    uz:{cart:"Savat",empty:"Savat bo‚Äòsh",order:"Buyurtma berish"},
    en:{cart:"Cart",empty:"Cart is empty",order:"Place order"}
  };

  const menuData = {
    "–®–∞—à–ª—ã–∫":[["–®–∞—à–ª—ã–∫ –∫—É—Ä–∏–Ω—ã–π",45000],["–®–∞—à–ª—ã–∫ –≥–æ–≤—è–∂–∏–π",60000]],
    "–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞":[["–®—É—Ä–ø–∞",35000]],
    "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª—é–¥–∞":[["–ü–ª–æ–≤",50000]],
    "–°–∞–ª–∞—Ç—ã":[["–û–ª–∏–≤—å–µ",30000]],
    "–ù–∞–ø–∏—Ç–∫–∏":[["–ö–æ–ª–∞ 1–ª",15000]],
    "–•–ª–µ–±":[["–õ–µ–ø—ë—à–∫–∞",5000]]
  };

  // üëâ –ë—ã—Å—Ç—Ä–∞—è –∫–∞—Ä—Ç–∞ —Ü–µ–Ω (–≤–∞–∂–Ω–æ!)
  const priceMap = {};
  for (const cat in menuData) {
    menuData[cat].forEach(([n,p])=>priceMap[n]=p);
  }

  // –Ø–ó–´–ö–ò
  const langDiv = document.getElementById("lang");
  ["ru","uz","en"].forEach(l=>{
    const b=document.createElement("button");
    b.type="button";
    b.className="lang-btn"+(l==="ru"?" active":"");
    b.textContent=l.toUpperCase();
    b.onclick=()=>{
      lang=l;
      document.querySelectorAll(".lang-btn").forEach(x=>x.classList.remove("active"));
      b.classList.add("active");
      renderCart();
    };
    langDiv.appendChild(b);
  });

  function renderCategories(){
    const div=document.getElementById("categories");
    div.innerHTML="";
    Object.keys(menuData).forEach(c=>{
      const b=document.createElement("button");
      b.type="button";
      b.className="category-btn"+(c===currentCategory?" active":"");
      b.textContent=c;
      b.onclick=()=>{
        currentCategory=c;
        renderCategories();
        renderMenu();
      };
      div.appendChild(b);
    });
  }

  function renderMenu(){
    const menu=document.getElementById("menu");
    menu.innerHTML="";
    menuData[currentCategory].forEach(([name,price])=>{
      cart[name]=cart[name]||0;

      const card=document.createElement("div");
      card.className="card";
      card.innerHTML=`<b>${name}</b><br>${price} —Å—É–º`;

      const minus=document.createElement("button");
      minus.type="button";
      minus.textContent="‚àí";
      minus.onclick=()=>{cart[name]=Math.max(0,cart[name]-1);renderMenu();renderCart();};

      const plus=document.createElement("button");
      plus.type="button";
      plus.textContent="+";
      plus.onclick=()=>{cart[name]++;renderMenu();renderCart();};

      card.append(minus,document.createTextNode(" "+cart[name]+" "),plus);
      menu.appendChild(card);
    });
  }

  function renderCart(){
    const div=document.getElementById("cart-items");
    div.innerHTML="";
    let total=0,has=false;

    for(let i in cart){
      if(cart[i]>0){
        has=true;
        total+=cart[i]*priceMap[i];
        div.innerHTML+=`<div class="cart-item"><span>${i} √ó ${cart[i]}</span><span>${cart[i]*priceMap[i]} —Å—É–º</span></div>`;
      }
    }

    if(!has) div.textContent=texts[lang].empty;
    document.getElementById("total").textContent=total;
    document.getElementById("order").textContent=texts[lang].order;
    document.getElementById("cart-title").textContent="üõí "+texts[lang].cart;
  }

  document.getElementById("order").onclick=()=>{
    tg.sendData(JSON.stringify({
      order:cart,
      total:document.getElementById("total").textContent,
      phone:document.getElementById("phone").value,
      lang:lang
    }));
  };

  renderCategories();
  renderMenu();
  renderCart();
});
</script>

</body>
</html>







